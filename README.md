# SpotTrack Bot - ุฑุจุงุช ุชูฺฏุฑุงู ุฏุงูููุฏ ููุฒฺฉ ุงุฒ ุงุณูพุงุชูุง

![Python](https://img.shields.io/badge/Python-3.10%2B-blue?style=for-the-badge&logo=python)
![Telegram Bot](https://img.shields.io/badge/Telegram%20Bot-API-blue?style=for-the-badge&logo=telegram)
![Spotify API](https://img.shields.io/badge/Spotify%20API-Spotipy-green?style=for-the-badge&logo=spotify)

---

## ๐ ูุนุฑู ูพุฑูฺู

**SpotTrack Bot** ฺฉ ุฑุจุงุช ุชูฺฏุฑุงู ุงุณุช ฺฉู ุจู ุดูุง ุงูฺฉุงู ูโุฏูุฏ ุจู ุณุงุฏฺฏ ููุฒฺฉโูุง ุงุณูพุงุชูุง ุฑุง ุฏุงูููุฏ ฺฉูุฏ. ฺฉุงู ุงุณุช ููฺฉ ุขููฺฏ ุงุณูพุงุชูุง ุฑุง ุงุฑุณุงู ฺฉูุฏ ู ูุงู MP3 ุจุง ฺฉูุช ุจุงูุง ุฑุง ุฏุฑุงูุช ููุงุฏ.

ุงู ุฑุจุงุช ุจุง ุงุณุชูุงุฏู ุงุฒ API ุงุณูพุงุชูุงุ ุณุณุชู ูพุฑูฺฉุณ ฺุฑุฎุด ุจุฑุง ุฏูุฑ ุฒุฏู ูุญุฏูุฏุชโูุงุ ู yt-dlp ุจุฑุง ุฏุงูููุฏ ู ุชุจุฏู ููุฒฺฉโูุง ุณุงุฎุชู ุดุฏู ุงุณุช.

**ุชูุณุนูโุฏููุฏู:** ูุญูุฏุญุณู ููุฑูุฒ

---

## โ๏ธ ูุงุจูุชโูุง

- ุฏุฑุงูุช ุงุทูุงุนุงุช ฺฉุงูู ุขููฺฏ (ูุงูุ ุฎูุงููุฏูุ ุขูุจููุ ฺฉุงูุฑ) ููุท ุจุง ุงุฑุณุงู ููฺฉ ุงุณูพุงุชูุง  
- ุฏุงูููุฏ ู ุชุจุฏู ุขููฺฏโูุง ุจู ูุฑูุช MP3 ุจุง ฺฉูุช ฑนฒkbps  
- ุงุณุชูุงุฏู ุงุฒ ุณุณุชู ูพุฑูฺฉุณ ฺุฑุฎุด ุจุฑุง ุงูุฒุงุด ูพุงุฏุงุฑ ู ุฌููฺฏุฑ ุงุฒ ุจูุงฺฉ ุดุฏู ุชูุณุท ุงุณูพุงุชูุง  
- ุขุฑุดู ฺฉุฑุฏู ุขููฺฏโูุง ุฏุงูููุฏ ุดุฏู ุฏุฑ ฺฉุงูุงู ุชูฺฏุฑุงู ุจุฑุง ุฏุณุชุฑุณ ุณุฑุนโุชุฑ  
- ูุฏุฑุช ูุญุฏูุฏุช ุฏุงูููุฏ ุฑูุฒุงูู ุจุฑุง ฺฉุงุฑุจุฑุงู ุนุงุฏ ู ูพุดุชุจุงู ุงุฒ ฺฉุงุฑุจุฑุงู VIP  
- ุฑุงุจุท ฺฉุงุฑุจุฑ ุณุงุฏู ู ุชุนุงูู ุฏุฑ ุชูฺฏุฑุงู ุจุง ูพุดุชุจุงู ุงุฒ ฺูุฏ ุฒุจุงู  
- ููุงุด ุงููุดู ูพุดุฑูุช ุฏุงูููุฏ ุฏุฑ ูพุงูโูุง  

---

## ๐๏ธ ูุนูุงุฑ ู ุณุงุฎุชุงุฑ ูพุฑูฺู

### ฑ. ููุทู ูุฑูุฏ: `main.py`

- ุฑุงูโุงูุฏุงุฒ ุฑุจุงุช ู ุฏุณูพฺุฑ aiogram  
- ุชูุธู ูุงฺฏโฺฏุฑ ู ูุฏุฑุช ุงุชุตุงู ุจู ุฏุชุงุจุณ MongoDB  
- ุซุจุช ููุฏูุฑูุง ูพุงู ู ฺฉุงูโุจฺฉโูุง  
- ูุฏุฑุช ุฑูุฏุงุฏูุง startup ู shutdown  

### ฒ. ููุฏูุฑูุง ฺฉุงุฑุจุฑ: `handlers/user.py`

- ูุฏุฑุช ุฏุณุชูุฑุงุช `/start` ู `/help`  
- ุฏุฑุงูุช ู ูพุฑุฏุงุฒุด ููฺฉโูุง ุงุณูพุงุชูุง (ุชุฑฺฉุ ุขูุจููุ ูพูโูุณุช)  
- ูุฏุฑุช ูุถุนุช ฺฉุงุฑุจุฑ ุจุง FSM (ุงูุชุธุงุฑ ุจุฑุง ููฺฉ)  
- ููุฏูุฑูุง ฺฉุงูโุจฺฉ ุจุฑุง ุฏุงูููุฏุ ูุบูุ ุชุบุฑ ุฒุจุงูุ ุงุฑุชูุง ุจู VIP ู ุจุงุฒฺฏุดุช  
- ุงููุดู ูพุดุฑูุช ุฏุงูููุฏ  
- ุงุฑุณุงู ูุงู ุตูุช ู ฺฉุงูุฑ ุจู ฺฉุงุฑุจุฑ ู ุขุฑุดู  

### ณ. ุงุฑุชุจุงุท ุจุง Spotify API: `services/spotify.py`

- ุงุณุชูุงุฏู ุงุฒ ฺฉุชุงุจุฎุงูู `spotipy` ุจุฑุง ุฏุฑุงูุช ุงุทูุงุนุงุช ุชุฑฺฉ  
- ุงุณุชูุงุฏู ุงุฒ ูพุฑูฺฉุณโูุง HTTP/HTTPS ุจู ุตูุฑุช ฺุฑุฎุด ุจุฑุง ุฌููฺฏุฑ ุงุฒ ุจูุงฺฉ ุดุฏู  
- ุงุณุชุฎุฑุงุฌ ุงุทูุงุนุงุช ููู ุชุฑฺฉ ุดุงูู ูุงูุ ุฎูุงููุฏูุ ุขูุจููุ ฺฉุงูุฑ ู ูุฏุช ุฒูุงู  

### ด. ุฏุงูููุฏ ู ุชุจุฏู ููุฒฺฉ: `services/downloader.py`

- ุงุณุชูุงุฏู ุงุฒ `yt_dlp` ุจุฑุง ุฌุณุชุฌู ู ุฏุงูููุฏ ููุฒฺฉ ุงุฒ ูุชูุจ  
- ุชุจุฏู ูุงู ุตูุช ุจู MP3 ุจุง ฺฉูุช ฑนฒkbps  
- ุฏุงูููุฏ ฺฉุงูุฑ ู ุฐุฎุฑู ุขู ุฏุฑ ฺฉูุงุฑ ูุงู ุตูุช  
- ุณุงุฎุช ูพูุดู ูููุช ููุญุตุฑุจูโูุฑุฏ ุจุฑุง ูุฑ ุฏุงูููุฏ  
- ุจุงุฒฺฏุฑุฏุงูุฏู ูุณุฑ ูุงู ุตูุชุ ูพูุดู ูููุช ู ูุงู ฺฉุงูุฑ  

### ต. ูุฏุฑุช ุฏุชุงุจุณ MongoDB: `db/mongo.py`

- ุงุชุตุงู async ุจู MongoDB ุจุง `motor`  
- ุฐุฎุฑู ู ุจุงุฒุงุจ ุงุทูุงุนุงุช ฺฉุงุฑุจุฑุงูุ ูุถุนุช VIPุ ุชุนุฏุงุฏ ุฏุงูููุฏูุง  
- ุฐุฎุฑู ู ุจุงุฒุงุจ ุขุฑุดู ุขููฺฏโูุง ุจุง `file_id` ูุงูโูุง ุขูพููุฏ ุดุฏู ุฏุฑ ุชูฺฏุฑุงู  
- ูุฏุฑุช ูุญุฏูุฏุช ุฏุงูููุฏ ุฑูุฒุงูู ู ุจุฑุฑุณ ูุถุนุช VIP  
- ุงูุฏฺฉุณโฺฏุฐุงุฑ ุจููู ุฑู ููุฏูุง ฺฉูุฏ  

### ถ. ุฑุงุจุท ฺฉุงุฑุจุฑ ู ูุชูโูุง: `utils/ui.py` (ุฎุงุฑุฌ ุงุฒ ุงู ูุณุชูุฏ)

- ุชููุฏ ูุชูโูุง ฺูุฏุฒุจุงูู  
- ุณุงุฎุช ฺฉุจูุฑุฏูุง Reply ู Inline ุจุฑุง ุชุนุงูู ุจุง ฺฉุงุฑุจุฑ  

---

## ๐ง ูพุดโูุงุฒูุง ู ูุตุจ

### ูพุดโูุงุฒูุง

- Python 3.10+  
- ffmpeg (ุจุฑุง ูพุฑุฏุงุฒุด ุตูุช)  
- MongoDB (ุฏุชุงุจุณ)  
- ุชูฺฉู ุฑุจุงุช ุชูฺฏุฑุงู ุงุฒ [@BotFather](https://t.me/BotFather)  
- ุญุณุงุจ Spotify Developer ุจุฑุง ุฏุฑุงูุช Client ID ู Client Secret  
- ูุณุช ูพุฑูฺฉุณโูุง HTTP/HTTPS ุจุง ุงุญุฑุงุฒ ููุช (ุชุฑุฌุญุงู ุงุฎุชุตุงุต ุง ูุณฺฉูู)  

### ูุตุจ ู ุฑุงูโุงูุฏุงุฒ

```bash
git clone https://github.com/YOUR_USERNAME/spotify_telegram_bot.git
cd spotify_telegram_bot

python3 -m venv venv
source venv/bin/activate

pip install -r requirements.txt

sudo apt update
sudo apt install ffmpeg
ุชูุธูุงุช
ฺฉ ูุงู config.py ุจุณุงุฒุฏ ู ููุงุฏุฑ ุฒุฑ ุฑุง ูุงุฑุฏ ฺฉูุฏ (ุง ูุชุบุฑูุง ูุญุท ุชูุธู ฺฉูุฏ):

python
Copy Code
import os

TELEGRAM_BOT_TOKEN = os.getenv("TELEGRAM_BOT_TOKEN", "YOUR_TELEGRAM_BOT_TOKEN")
SPOTIPY_CLIENT_ID = os.getenv("SPOTIPY_CLIENT_ID", "YOUR_SPOTIPY_CLIENT_ID")
SPOTIPY_CLIENT_SECRET = os.getenv("SPOTIPY_CLIENT_SECRET", "YOUR_SPOTIPY_CLIENT_SECRET")
ARCHIVE_CHANNEL_ID = os.getenv("ARCHIVE_CHANNEL_ID", None)  # ุขุฏ ฺฉุงูุงู ุชูฺฏุฑุงู ุจุฑุง ุขุฑุดู
PROXIES = [
    "http://user:pass@ip:port",
    # ูพุฑูฺฉุณโูุง ุฏฺฏุฑ
]
DOWNLOAD_DIR = os.getenv("DOWNLOAD_DIR", "temp_downloads")
DEFAULT_LANGUAGE = "fa"
MONGO_URI = os.getenv("MONGO_URI", "mongodb://localhost:27017")
MONGO_DB_NAME = os.getenv("MONGO_DB_NAME", "spottrack_db")
BOT_TOKEN = TELEGRAM_BOT_TOKEN
STORAGE_CHANNEL_ID = ARCHIVE_CHANNEL_ID
DOWNLOAD_LIMIT_PER_USER = 5  # ูุญุฏูุฏุช ุฏุงูููุฏ ุฑูุฒุงูู ุจุฑุง ฺฉุงุฑุจุฑุงู ุนุงุฏ
๐ ูุงุจุณุชฺฏโูุง (requirements.txt)
aiogram
spotipy
pymongo
python-dotenv
loguru
yt-dlp
mutagen
aiofiles
requests
๐ ูฺฉุงุช ููู
ูพุฑูฺฉุณโูุง ุจุฑุง ุฌููฺฏุฑ ุงุฒ ุจูุงฺฉ ุดุฏู ุชูุณุท ุงุณูพุงุชูุง ุญุงุช ูุณุชูุฏ. ุญุชูุงู ูพุฑูฺฉุณโูุง ุจุง ฺฉูุช ู ุงุญุฑุงุฒ ููุช ุดุฏู ุงุณุชูุงุฏู ฺฉูุฏ.
ูุญุฏูุฏุช ุฏุงูููุฏ ุฑูุฒุงูู ุจุฑุง ฺฉุงุฑุจุฑุงู ุนุงุฏ ุงุนูุงู ุดุฏู ุงุณุช ู ฺฉุงุฑุจุฑุงู VIP ูุญุฏูุฏุช ูุฏุงุฑูุฏ.
ุขุฑุดู ุขููฺฏโูุง ุฏุฑ ฺฉุงูุงู ุชูฺฏุฑุงู ุฐุฎุฑู ูโุดูุฏ ุชุง ุฏุฑ ุฏูุนุงุช ุจุนุฏ ุณุฑุนโุชุฑ ุงุฑุณุงู ุดููุฏ.
ุงููุดู ูพุดุฑูุช ุฏุงูููุฏ ุฏุฑ ูพุงูโูุง ุชุฌุฑุจู ฺฉุงุฑุจุฑ ุจูุชุฑ ุงุฌุงุฏ ูโฺฉูุฏ.
ูุฏุฑุช ุฒุจุงู ู ุฑุงุจุท ฺฉุงุฑุจุฑ ฺูุฏุฒุจุงูู ุจุฑุง ุฑุงุญุช ฺฉุงุฑุจุฑุงู ูุฑุงูู ุดุฏู ุงุณุช.
๐ ูุฏุฑุฏุงู
ุงู ุฑุจุงุช ูุชุฌู ุชูุงุด ู ุชุฌุฑุจู ูุฑุงูุงู ุฏุฑ ฺฉุงุฑ ุจุง APIูุง ูุฎุชููุ ูุฏุฑุช ูพุฑูฺฉุณโูุง ู ุทุฑุงุญ ุฑุงุจุท ฺฉุงุฑุจุฑ ุฏุฑ ุชูฺฏุฑุงู ุงุณุช. ุงูุฏูุงุฑู ุจุฑุง ุดูุง ููุฏ ู ูุฐุชโุจุฎุด ุจุงุดุฏ.

ุชูุณุนูโุฏููุฏู: ูุญูุฏุญุณู ููุฑูุฒ
ุชุงุฑุฎ: ฑดฐฒ

๐ ูพุดุชุจุงู ู ุงุฑุชุจุงุท
ุจุฑุง ุณูุงูุงุช ู ูุดฺฉูุงุชุ ูุทูุงู ุงุฒ ุทุฑู ุงูู ุง ฺฏุชโูุงุจ ุจุง ูู ุฏุฑ ุงุฑุชุจุงุท ุจุงุดุฏ.

## ๐ ูุงุณูุณ ู ุญู ูุดุฑ

ุชูุงู ุญููู ุงู ูพุฑูฺู ูุชุนูู ุจู **ูุญูุฏุญุณู ููุฑูุฒ** ุงุณุช.  
ุงุณุชูุงุฏูุ ฺฉูพุ ุชุบุฑ ู ุงูุชุดุงุฑ ุงู ฺฉุฏ ุชููุง ุจุง ุฐฺฉุฑ ูุงู ุชูุณุนูโุฏููุฏู ู ฺฉุณุจ ุงุฌุงุฒู ฺฉุชุจ ูุฌุงุฒ ุงุณุช.